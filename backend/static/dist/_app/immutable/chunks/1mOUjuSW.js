import{p as oe,c as O,f as n,t as W,a as t,i as I,s as $}from"./DRF5TCtt.js";import{p as Ce,f as a,c as d,n as y,s as r,r as c,g as s,u as k,t as M,a as ze}from"./BjAeDMBy.js";import{c as o}from"./g5lWU4bW.js";import{C as ye,a as Ae,b as Se}from"./CZ9m_hDi.js";import{C as Ee}from"./C2TvfYoV.js";import{C as De}from"./kLTvEu21.js";import{b as he,f as Oe,g as We}from"./CDT9LSXp.js";import{g as Re}from"./BOe3pJkQ.js";import{B as Pe}from"./2wOyHH5q.js";import{a as Ge}from"./DPmphkir.js";import{g as Le}from"./C3Sf7PJj.js";import{C as Je,L as pe}from"./Be2xkbpT.js";import{A as Ne}from"./BeZrX3YG.js";import{e as Ke,i as Qe}from"./Cz_w3iUV.js";import{c as Xe}from"./zDxND3qM.js";import{c as Ye,b as Ze,d as et,T as Ue,a as ke}from"./y6C-zUiM.js";import{a as we,T as tt}from"./PdIRTCrQ.js";import{V as rt}from"./DuenOIq5.js";var at=n('<span class="inline-flex items-center rounded-md bg-blue-50 dark:bg-blue-900/30 px-2 py-1 text-xs font-medium text-blue-700 dark:text-blue-300 ring-1 ring-inset ring-blue-700/10 dark:ring-blue-400/30">Message</span>'),ot=n("<!> Archive",1),st=n('<div class="flex justify-between"><div class="flex items-center gap-2"><!> <!></div> <!></div> <!>',1),nt=n('<div class="rounded-md bg-muted p-4 overflow-x-auto"><pre class="text-sm whitespace-pre-wrap font-mono"> </pre></div>'),lt=n("<!> <!>",1);function Bt(se,e){Ce(e,!0);let ne=oe(e,"isMessage",3,!1),le=oe(e,"showArchiveDialog",15);const Y=k(()=>e.timezone??Re()),G=k(()=>e.firstSeen&&e.lastSeen&&e.totalCount!==void 0);var J=O(),Z=a(J);o(Z,()=>Se,(ie,H)=>{H(ie,{children:(xe,de)=>{var ee=lt(),K=a(ee);{let L=k(()=>s(G)?"":"pb-0 gap-0");o(K,()=>ye,(A,N)=>{N(A,{get class(){return s(L)},children:(w,x)=>{var l=st(),v=a(l),p=d(v),u=d(p);o(u,()=>Ae,(m,_)=>{_(m,{children:(b,S)=>{y();var j=W("Stack Trace");t(b,j)},$$slots:{default:!0}})});var P=r(u,2);{var h=m=>{var _=at();t(m,_)};I(P,m=>{ne()&&m(h)})}c(p);var D=r(p,2);Pe(D,{variant:"outline",size:"sm",onclick:()=>le(!0),get disabled(){return e.archiving},class:"gap-1.5 shrink-0",children:(m,_)=>{var b=ot(),S=a(b);Ge(S,{class:"h-4 w-4"}),y(),t(m,b)},$$slots:{default:!0}}),c(v);var C=r(v,2);{var ce=m=>{var _=O(),b=a(_);o(b,()=>De,(S,j)=>{j(S,{children:(B,te)=>{y();var g=W();M((z,f)=>$(g,`First seen: ${z??""} ·
                Last seen: ${f??""} ·
                Total occurrences: ${e.totalCount??""}`),[()=>he(e.firstSeen,{timezone:s(Y)}),()=>he(e.lastSeen,{timezone:s(Y)})]),t(B,g)},$$slots:{default:!0}})}),t(m,_)};I(C,m=>{s(G)&&m(ce)})}t(w,l)},$$slots:{default:!0}})})}var U=r(K,2);o(U,()=>Ee,(L,A)=>{A(L,{children:(N,w)=>{var x=nt(),l=d(x),v=d(l,!0);c(l),c(x),M(()=>$(v,e.stackTrace)),t(N,x)},$$slots:{default:!0}})}),t(xe,ee)},$$slots:{default:!0}})}),t(se,J),ze()}var it=n("<!> <!>",1),dt=n('<hr class="border-border"/> <div><p class="text-sm font-medium mb-3">Context (Scope)</p> <!></div>',1),ct=n("View Task Details <!>",1),vt=n("View Endpoint Details <!>",1),ut=n('<hr class="border-border"/> <div><p class="text-sm font-medium mb-3"> </p> <div class="grid grid-cols-2 gap-4 md:grid-cols-4 mb-4"><!> <!> <!> <!></div> <!></div>',1),mt=n('<div class="grid grid-cols-2 gap-4 md:grid-cols-4"><div class="space-y-1"><p class="text-sm text-muted-foreground">Recorded At</p> <p class="font-mono text-sm"> </p></div> <div class="space-y-1"><p class="text-sm text-muted-foreground">Server</p> <p class="font-mono text-sm"> </p></div> <div class="space-y-1"><p class="text-sm text-muted-foreground">Version</p> <p class="font-mono text-sm"> </p></div> <div class="space-y-1"><p class="text-sm text-muted-foreground">Transaction</p> <p class="font-mono text-sm"> </p></div></div> <!> <!>',1),_t=n("<!> <!>",1);function qt(se,e){Ce(e,!0);let ne=oe(e,"title",3,"Event"),le=oe(e,"description",3,"Details for this specific occurrence");const Y=k(()=>e.timezone??Re());var G=O(),J=a(G);o(J,()=>Se,(Z,ie)=>{ie(Z,{children:(H,xe)=>{var de=_t(),ee=a(de);o(ee,()=>ye,(U,L)=>{L(U,{children:(A,N)=>{var w=it(),x=a(w);o(x,()=>Ae,(v,p)=>{p(v,{children:(u,P)=>{y();var h=W();M(()=>$(h,ne())),t(u,h)},$$slots:{default:!0}})});var l=r(x,2);o(l,()=>De,(v,p)=>{p(v,{children:(u,P)=>{y();var h=W();M(()=>$(h,le())),t(u,h)},$$slots:{default:!0}})}),t(A,w)},$$slots:{default:!0}})});var K=r(ee,2);o(K,()=>Ee,(U,L)=>{L(U,{class:"space-y-6",children:(A,N)=>{var w=mt(),x=a(w),l=d(x),v=r(d(l),2),p=d(v,!0);c(v),c(l);var u=r(l,2),P=r(d(u),2),h=d(P,!0);c(P),c(u);var D=r(u,2),C=r(d(D),2),ce=d(C,!0);c(C),c(D);var m=r(D,2),_=r(d(m),2),b=d(_,!0);c(_),c(m),c(x);var S=r(x,2);{var j=g=>{var z=dt(),f=r(a(z),2),R=r(d(f),2);Je(R,{get scope(){return e.occurrence.scope}}),c(f),t(g,z)};I(S,g=>{e.occurrence.scope&&Object.keys(e.occurrence.scope).length>0&&g(j)})}var B=r(S,2);{var te=g=>{var z=ut(),f=r(a(z),2),R=d(f),re=d(R,!0);c(R);var Q=r(R,2),ve=d(Q);{let i=k(()=>e.linkedTransaction.transactionType==="task"?"Task":"Endpoint");pe(ve,{get label(){return s(i)},get value(){return e.linkedTransaction.endpoint},mono:!0})}var E=r(ve,2);{var T=i=>{{let X=k(()=>We(e.linkedTransaction.statusCode));pe(i,{label:"Status",get value(){return e.linkedTransaction.statusCode},mono:!0,large:!0,get valueClass(){return s(X)}})}};I(E,i=>{e.linkedTransaction.transactionType!=="task"&&i(T)})}var V=r(E,2);{let i=k(()=>Oe(e.linkedTransaction.duration));pe(V,{label:"Duration",get value(){return s(i)},mono:!0,large:!0})}var ue=r(V,2);{let i=k(()=>he(e.linkedTransaction.recordedAt,{timezone:e.timezone}));pe(ue,{label:"Recorded At",get value(){return s(i)},mono:!0})}c(Q);var be=r(Q,2);{var Te=i=>{Pe(i,{variant:"outline",size:"sm",onclick:()=>Le(`/tasks/${encodeURIComponent(e.linkedTransaction.endpoint)}/${e.linkedTransaction.id}?preset=24h`),children:(X,Ve)=>{y();var q=ct(),ae=r(a(q));Ne(ae,{class:"ml-2 h-4 w-4"}),t(X,q)},$$slots:{default:!0}})},$e=i=>{Pe(i,{variant:"outline",size:"sm",onclick:()=>Le(`/endpoints/${encodeURIComponent(e.linkedTransaction.endpoint)}/${e.linkedTransaction.id}?preset=24h`),children:(X,Ve)=>{y();var q=vt(),ae=r(a(q));Ne(ae,{class:"ml-2 h-4 w-4"}),t(X,q)},$$slots:{default:!0}})};I(be,i=>{e.linkedTransaction.transactionType==="task"?i(Te):i($e,!1)})}c(f),M(()=>$(re,e.linkedTransaction.transactionType==="task"?"Related Task":"Related Endpoint")),t(g,z)};I(B,g=>{e.linkedTransaction&&g(te)})}M(g=>{$(p,g),$(h,e.occurrence.serverName||"-"),$(ce,e.occurrence.appVersion||"-"),$(b,e.occurrence.transactionId||"-")},[()=>he(e.occurrence.recordedAt,{timezone:s(Y)})]),t(A,w)},$$slots:{default:!0}})}),t(H,de)},$$slots:{default:!0}})}),t(se,G),ze()}var ft=n("<!> <!>",1),gt=n("<!> <!> <!>",1),ht=n('<span class="ml-2 text-xs text-muted-foreground">(current)</span>'),xt=n(" <!>",1),pt=n("<!> <!> <!>",1),bt=n("<!> <!>",1),Tt=n("<!> <!>",1),$t=n('<div class="rounded-md border overflow-hidden"><!></div>'),kt=n("<!> <!>",1);function Ft(se,e){Ce(e,!0);let ne=oe(e,"hasMore",3,!1),le=oe(e,"showViewAll",3,!0);const Y=k(()=>e.timezone??Re());function G(H){return`/issues/${e.exceptionHash}/${H.id}`}function J(H){return e.currentExceptionId!==void 0&&H.id===e.currentExceptionId}var Z=O(),ie=a(Z);o(ie,()=>Se,(H,xe)=>{xe(H,{children:(de,ee)=>{var K=kt(),U=a(K);o(U,()=>ye,(A,N)=>{N(A,{children:(w,x)=>{var l=ft(),v=a(l);o(v,()=>Ae,(u,P)=>{P(u,{children:(h,D)=>{y();var C=W("Events");t(h,C)},$$slots:{default:!0}})});var p=r(v,2);o(p,()=>De,(u,P)=>{P(u,{children:(h,D)=>{y();var C=W();M(()=>$(C,`All occurrences of this exception (${e.total??""} total)`)),t(h,C)},$$slots:{default:!0}})}),t(w,l)},$$slots:{default:!0}})});var L=r(U,2);o(L,()=>Ee,(A,N)=>{N(A,{children:(w,x)=>{var l=$t(),v=d(l);o(v,()=>Ye,(p,u)=>{u(p,{children:(P,h)=>{var D=Tt(),C=a(D);{var ce=_=>{var b=O(),S=a(b);o(S,()=>et,(j,B)=>{B(j,{children:(te,g)=>{var z=O(),f=a(z);o(f,()=>Ue,(R,re)=>{re(R,{children:(Q,ve)=>{var E=gt(),T=a(E);we(T,{label:"Recorded At",tooltip:"When this occurrence was recorded"});var V=r(T,2);we(V,{label:"Server",tooltip:"Server instance where error occurred"});var ue=r(V,2);we(ue,{label:"Transaction",tooltip:"Transaction ID if this occurred during a request"}),t(Q,E)},$$slots:{default:!0}})}),t(te,z)},$$slots:{default:!0}})}),t(_,b)};I(C,_=>{e.occurrences.length>0&&_(ce)})}var m=r(C,2);o(m,()=>Ze,(_,b)=>{b(_,{children:(S,j)=>{var B=O(),te=a(B);{var g=f=>{tt(f,{colspan:3,message:"No occurrences found."})},z=f=>{var R=bt(),re=a(R);Ke(re,17,()=>e.occurrences,Qe,(E,T)=>{var V=O(),ue=a(V);{let be=k(()=>J(s(T))?"bg-muted":""),Te=k(()=>Xe(G(s(T))));o(ue,()=>Ue,($e,i)=>{i($e,{get class(){return`cursor-pointer hover:bg-muted/50 ${s(be)??""}`},get onclick(){return s(Te)},children:(X,Ve)=>{var q=pt(),ae=a(q);o(ae,()=>ke,(me,_e)=>{_e(me,{children:(fe,Me)=>{y();var F=xt(),He=a(F),Be=r(He);{var qe=ge=>{var Fe=ht();t(ge,Fe)};I(Be,ge=>{J(s(T))&&ge(qe)})}M(ge=>$(He,`${ge??""} `),[()=>he(s(T).recordedAt,{timezone:s(Y)})]),t(fe,F)},$$slots:{default:!0}})});var Ie=r(ae,2);o(Ie,()=>ke,(me,_e)=>{_e(me,{class:"font-mono text-sm text-muted-foreground",children:(fe,Me)=>{y();var F=W();M(()=>$(F,s(T).serverName||"-")),t(fe,F)},$$slots:{default:!0}})});var je=r(Ie,2);o(je,()=>ke,(me,_e)=>{_e(me,{class:"font-mono text-sm",children:(fe,Me)=>{y();var F=W();M(()=>$(F,s(T).transactionId||"-")),t(fe,F)},$$slots:{default:!0}})}),t(X,q)},$$slots:{default:!0}})})}t(E,V)});var Q=r(re,2);{var ve=E=>{{let T=k(()=>`/issues/${e.exceptionHash}/events`),V=k(()=>`View all ${e.total} events`);rt(E,{colspan:3,get href(){return s(T)},get label(){return s(V)}})}};I(Q,E=>{ne()&&le()&&E(ve)})}t(f,R)};I(te,f=>{e.occurrences.length===0?f(g):f(z,!1)})}t(S,B)},$$slots:{default:!0}})}),t(P,D)},$$slots:{default:!0}})}),c(l),t(w,l)},$$slots:{default:!0}})}),t(de,K)},$$slots:{default:!0}})}),t(se,Z),ze()}export{Ft as E,Bt as S,qt as a};
