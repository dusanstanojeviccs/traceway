import{r as Pt}from"../chunks/hp4PFHFv.js";import{a as Dt,b as Ct,p as kt,e as Ft,i as Rt}from"../chunks/Cz_w3iUV.js";import{f as J,i as oe,a as o,c as C,s as h,t as se}from"../chunks/DRF5TCtt.js";import{p as wt,m as f,h as N,q as zt,a as Bt,g as e,u as B,c as n,r as i,w as r,f as $,s,n as T,t as V}from"../chunks/BjAeDMBy.js";import{c as _}from"../chunks/g5lWU4bW.js";import{p as Ze,c as et,t as tt,a as De,b as It,f as Ut,g as At}from"../chunks/CDT9LSXp.js";import{g as jt}from"../chunks/BOe3pJkQ.js";import{b as Lt,d as Mt,T as Ue,a as I,c as Ot}from"../chunks/y6C-zUiM.js";import"../chunks/2wOyHH5q.js";import{L as rt}from"../chunks/2O2paTqt.js";import{d as at,c as ot,e as Et,f as st,u as Nt,T as Vt}from"../chunks/DYapue6Z.js";import{a as q,T as qt}from"../chunks/PdIRTCrQ.js";import{E as nt}from"../chunks/CEa0NWkH.js";import{S as Jt}from"../chunks/PDIvjsiP.js";import{c as Ce}from"../chunks/zDxND3qM.js";import{P as Kt}from"../chunks/BUOTwRzw.js";import{P as Gt}from"../chunks/DpxRarxq.js";import{r as Ae}from"../chunks/UIOQSdMs.js";import{g as Ht,h as Yt,s as Qt}from"../chunks/X-i49s3k.js";const Wt=!1,Xt=({params:ke,url:u})=>{if(!Dt.isAuthenticated)throw Pt(302,"/login");return{endpoint:ke.endpoint,preset:u.searchParams.get("preset")||null,from:u.searchParams.get("from")||null,to:u.searchParams.get("to")||null}},Cr=Object.freeze(Object.defineProperty({__proto__:null,load:Xt,prerender:Wt},Symbol.toStringTag,{value:"Module"}));var Zt=J('<div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4"><div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">Average response time</p></div> <div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">Median response time</p></div> <div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">95th percentile response time</p></div> <div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">99th percentile response time</p></div> <div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">Apdex score</p></div> <div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">Average error rate</p></div> <div class="space-y-1"><p class="text-2xl font-semibold tracking-tight"> </p> <p class="text-xs text-muted-foreground">Average throughput</p></div></div>'),er=J('<div class="flex items-center justify-center py-8"><!></div>'),tr=J("<!> <!> <!> <!> <!> <!> <!> <!>",1),rr=J('<div class="flex items-center justify-center"><!></div>'),ar=J("<!> <!> <!> <!> <!> <!> <!> <!>",1),or=J("<!> <!>",1),sr=J('<div class="flex flex-col gap-4 sm:flex-row sm:justify-between"><!> <div class="flex flex-col"><!></div></div> <!> <div class="rounded-md border overflow-hidden"><!></div> <!>',1),nr=J('<div class="space-y-6"><!></div>');function kr(ke,u){wt(u,!0);const K=B(jt);let he=f(N([])),k=f(null),G=f(!0),$e=f(""),Fe=f(!1),Te=f(0),ne=f(1),Re=f(20),je=f(0),we=f(0);function it(){if(u.data.preset&&Et[u.data.preset]){const a=st(u.data.preset,e(K));return{preset:u.data.preset,from:a.from,to:a.to}}if(u.data.from&&u.data.to){const a=Ze(u.data.from,e(K)),c=Ze(u.data.to,e(K));if(a.isValid&&c.isValid)return{preset:null,from:a.toJSDate(),to:c.toJSDate()}}const t=st("24h",e(K));return{preset:"24h",from:t.from,to:t.to}}const fe=it();let pe=f(N(fe.preset)),ie=f(N(at(fe.from))),le=f(N(at(fe.to))),be=f(N(ot(fe.from))),Se=f(N(ot(fe.to)));function lt(t=!0){Nt(e(pe)?{preset:e(pe)}:{from:Oe(),to:Ee()},{pushToHistory:t})}const Le="endpoint_detail",Me=Ht(Le,{field:"recorded_at",direction:"desc"});let H=f(N(Me.field)),Y=f(N(Me.direction));function Oe(){const[t,a]=(e(be)||"00:00").split(":").map(Number),c=et({year:e(ie).year,month:e(ie).month,day:e(ie).day,hour:t,minute:a},e(K));return tt(c)}function Ee(){const[t,a]=(e(Se)||"23:59").split(":").map(Number),c=et({year:e(le).year,month:e(le).month,day:e(le).day,hour:t,minute:a},e(K));return tt(c)}function dt(t,a,c){r(ie,t.date,!0),r(be,t.time,!0),r(le,a.date,!0),r(Se,a.time,!0),r(pe,c,!0),r(ne,1),Q()}function ut(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}async function Q(t=!0){r(G,!0),r($e,""),r(Fe,!1),r(Te,0),lt(t);try{const a={fromDate:Oe(),toDate:Ee(),orderBy:e(H),sortDirection:e(Y),pagination:{page:e(ne),pageSize:e(Re)}},c=await Ct.post(`/endpoints/endpoint?endpoint=${encodeURIComponent(u.data.endpoint)}`,a,{projectId:kt.currentProjectId??void 0});r(he,c.data||[],!0),r(k,c.stats||null,!0),r(je,c.pagination.total,!0),r(we,c.pagination.totalPages,!0)}catch(a){console.error(a),r(Te,a.status||0,!0),a.status===404?r(Fe,!0):r($e,a.message||"Failed to load data",!0)}finally{r(G,!1)}}function ct(t){t>=1&&t<=e(we)&&(r(ne,t,!0),Q(!1))}function mt(t){r(Re,t,!0),r(ne,1),Q(!1)}function ye(t){const a=Yt(t,e(H),e(Y));r(H,a.field,!0),r(Y,a.direction,!0),Qt(Le,a),r(ne,1),Q(!1)}zt(()=>{Q(!1)});var ze=nr(),ft=n(ze);{var pt=t=>{{let a=B(()=>Ce(Ae("/endpoints"),"presets","from","to")),c=B(()=>decodeURIComponent(u.data.endpoint));nt(t,{status:404,title:"Endpoint Not Found",description:"The endpoint you're looking for doesn't exist or has no recorded transactions.",get onBack(){return e(a)},backLabel:"Back to Transactions",onRetry:()=>Q(!1),get identifier(){return e(c)}})}},vt=t=>{var a=C(),c=$(a);{var gt=de=>{{let Pe=B(()=>e(Te)===400?400:e(Te)===422?422:400),ve=B(()=>Ce(Ae("/endpoints"),"presets","from","to"));nt(de,{get status(){return e(Pe)},title:"Failed to Load Transactions",get description(){return e($e)},get onBack(){return e(ve)},backLabel:"Back to Transactions",onRetry:()=>Q(!1)})}},_t=de=>{var Pe=sr(),ve=$(Pe),Ne=n(ve);{let l=B(()=>decodeURIComponent(u.data.endpoint)),y=B(()=>Ce(Ae("/endpoints"),"presets","from","to"));Gt(Ne,{get title(){return e(l)},subtitle:"Transaction instances for this endpoint",get onBack(){return e(y)}})}var Ve=s(Ne,2),xt=n(Ve);Vt(xt,{onApply:dt,get fromDate(){return e(ie)},set fromDate(l){r(ie,l,!0)},get toDate(){return e(le)},set toDate(l){r(le,l,!0)},get fromTime(){return e(be)},set fromTime(l){r(be,l,!0)},get toTime(){return e(Se)},set toTime(l){r(Se,l,!0)},get preset(){return e(pe)},set preset(l){r(pe,l,!0)}}),i(Ve),i(ve);var qe=s(ve,2);{var ht=l=>{var y=Zt(),W=n(y),ge=n(W),U=n(ge,!0);i(ge),T(2),i(W);var P=s(W,2),ue=n(P),Ie=n(ue,!0);i(ue),T(2),i(P);var F=s(P,2),X=n(F),_e=n(X,!0);i(X),T(2),i(F);var ce=s(F,2),Z=n(ce),xe=n(Z,!0);i(Z),T(2),i(ce);var me=s(ce,2),ee=n(me),D=n(ee,!0);i(ee),T(2),i(me);var b=s(me,2),A=n(b),te=n(A);i(A),T(2),i(b);var re=s(b,2),x=n(re),j=n(x);i(x),T(2),i(re),i(y),V((R,L,m,w,M,ae,z)=>{h(U,R),h(Ie,L),h(_e,m),h(xe,w),h(D,M),h(te,`${ae??""} %`),h(j,`${z??""} rpm`)},[()=>De(e(k).avgDuration),()=>De(e(k).medianDuration),()=>De(e(k).p95Duration),()=>De(e(k).p99Duration),()=>e(k).apdex.toFixed(2),()=>e(k).errorRate.toFixed(2),()=>e(k).throughput.toFixed(0)]),o(l,y)},$t=l=>{var y=C(),W=$(y);{var ge=U=>{var P=er(),ue=n(P);rt(ue,{size:"lg"}),i(P),o(U,P)};oe(W,U=>{e(G)&&U(ge)},!0)}o(l,y)};oe(qe,l=>{e(k)?l(ht):l($t,!1)})}var Be=s(qe,2),Tt=n(Be);_(Tt,()=>Ot,(l,y)=>{y(l,{children:(W,ge)=>{var U=or(),P=$(U);{var ue=F=>{var X=C(),_e=$(X);_(_e,()=>Mt,(ce,Z)=>{Z(ce,{children:(xe,me)=>{var ee=C(),D=$(ee);_(D,()=>Ue,(b,A)=>{A(b,{children:(te,re)=>{var x=tr(),j=$(x);q(j,{label:"Recorded At",sortField:"recorded_at",get currentSortField(){return e(H)},get sortDirection(){return e(Y)},onSort:S=>ye(S),class:"w-[180px]"});var R=s(j,2);q(R,{label:"Duration",sortField:"duration",get currentSortField(){return e(H)},get sortDirection(){return e(Y)},onSort:S=>ye(S),class:"w-[120px]"});var L=s(R,2);q(L,{label:"Status",sortField:"status_code",get currentSortField(){return e(H)},get sortDirection(){return e(Y)},onSort:S=>ye(S),class:"w-[100px]"});var m=s(L,2);q(m,{label:"Body Size",sortField:"body_size",get currentSortField(){return e(H)},get sortDirection(){return e(Y)},onSort:S=>ye(S),class:"w-[100px]"});var w=s(m,2);q(w,{label:"Client IP",class:"w-[140px]"});var M=s(w,2);q(M,{label:"Server",class:"w-[120px]"});var ae=s(M,2);q(ae,{label:"Version",class:"w-[100px]"});var z=s(ae,2);q(z,{label:"Context"}),o(te,x)},$$slots:{default:!0}})}),o(xe,ee)},$$slots:{default:!0}})}),o(F,X)};oe(P,F=>{(e(G)||e(he).length>0)&&F(ue)})}var Ie=s(P,2);_(Ie,()=>Lt,(F,X)=>{X(F,{children:(_e,ce)=>{var Z=C(),xe=$(Z);{var me=D=>{var b=C(),A=$(b);_(A,()=>Ue,(te,re)=>{re(te,{children:(x,j)=>{var R=C(),L=$(R);_(L,()=>I,(m,w)=>{w(m,{colspan:8,class:"h-48",children:(M,ae)=>{var z=rr(),S=n(z);rt(S,{size:"lg"}),i(z),o(M,z)},$$slots:{default:!0}})}),o(x,R)},$$slots:{default:!0}})}),o(D,b)},ee=D=>{var b=C(),A=$(b);{var te=x=>{qt(x,{colspan:8,message:"No transactions found in this time range."})},re=x=>{var j=C(),R=$(j);Ft(R,17,()=>e(he),Rt,(L,m)=>{var w=C(),M=$(w);{let ae=B(()=>Ce(`/endpoints/${encodeURIComponent(decodeURIComponent(u.data.endpoint))}/${e(m).id}`));_(M,()=>Ue,(z,S)=>{S(z,{class:"cursor-pointer hover:bg-muted/50",get onclick(){return e(ae)},children:(St,ir)=>{var Je=ar(),Ke=$(Je);_(Ke,()=>I,(p,v)=>{v(p,{class:"text-muted-foreground",children:(g,O)=>{T();var d=se();V(E=>h(d,E),[()=>It(e(m).recordedAt,{timezone:e(K)})]),o(g,d)},$$slots:{default:!0}})});var Ge=s(Ke,2);_(Ge,()=>I,(p,v)=>{v(p,{class:"font-mono text-sm",children:(g,O)=>{T();var d=se();V(E=>h(d,E),[()=>Ut(e(m).duration)]),o(g,d)},$$slots:{default:!0}})});var He=s(Ge,2);{let p=B(()=>At(e(m).statusCode));_(He,()=>I,(v,g)=>{g(v,{get class(){return`font-mono text-sm ${e(p)??""}`},children:(O,d)=>{T();var E=se();V(()=>h(E,e(m).statusCode)),o(O,E)},$$slots:{default:!0}})})}var Ye=s(He,2);_(Ye,()=>I,(p,v)=>{v(p,{class:"font-mono text-sm",children:(g,O)=>{T();var d=se();V(E=>h(d,E),[()=>ut(e(m).bodySize)]),o(g,d)},$$slots:{default:!0}})});var Qe=s(Ye,2);_(Qe,()=>I,(p,v)=>{v(p,{class:"font-mono text-sm text-muted-foreground",children:(g,O)=>{T();var d=se();V(()=>h(d,e(m).clientIP)),o(g,d)},$$slots:{default:!0}})});var We=s(Qe,2);_(We,()=>I,(p,v)=>{v(p,{class:"font-mono text-sm text-muted-foreground",children:(g,O)=>{T();var d=se();V(()=>h(d,e(m).serverName||"-")),o(g,d)},$$slots:{default:!0}})});var Xe=s(We,2);_(Xe,()=>I,(p,v)=>{v(p,{class:"font-mono text-sm text-muted-foreground",children:(g,O)=>{T();var d=se();V(()=>h(d,e(m).appVersion||"-")),o(g,d)},$$slots:{default:!0}})});var yt=s(Xe,2);_(yt,()=>I,(p,v)=>{v(p,{children:(g,O)=>{Jt(g,{get scope(){return e(m).scope}})},$$slots:{default:!0}})}),o(St,Je)},$$slots:{default:!0}})})}o(L,w)}),o(x,j)};oe(A,x=>{e(he).length===0?x(te):x(re,!1)},!0)}o(D,b)};oe(xe,D=>{e(G)?D(me):D(ee,!1)})}o(_e,Z)},$$slots:{default:!0}})}),o(W,U)},$$slots:{default:!0}})}),i(Be);var bt=s(Be,2);Kt(bt,{get currentPage(){return e(ne)},get totalPages(){return e(we)},get pageSize(){return e(Re)},get totalItems(){return e(je)},onPageChange:ct,onPageSizeChange:mt,get loading(){return e(G)},itemLabel:"endpoint"}),o(de,Pe)};oe(c,de=>{e($e)&&!e(G)?de(gt):de(_t,!1)},!0)}o(t,a)};oe(ft,t=>{e(Fe)?t(pt):t(vt,!1)})}i(ze),o(ke,ze),Bt()}export{kr as component,Cr as universal};
