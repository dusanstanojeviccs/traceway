import{r as le}from"../chunks/hp4PFHFv.js";import{a as ne,b as de,p as ie,e as Et,i as Nt}from"../chunks/Cz_w3iUV.js";import{l as Ot,d as Wt,c as T,a as e,f as c,i as it,t as K,s as Q}from"../chunks/DRF5TCtt.js";import{f as s,p as ce,q as ve,a as ue,c as w,g as t,m as _t,s as a,r as y,w as X,u as ct,n as Y,t as Z}from"../chunks/BjAeDMBy.js";import{c as r}from"../chunks/g5lWU4bW.js";import{c as Dt}from"../chunks/zDxND3qM.js";import{f as Lt,d as pe,e as _e}from"../chunks/CDT9LSXp.js";import{g as fe}from"../chunks/BOe3pJkQ.js";import{L as me}from"../chunks/2O2paTqt.js";import{d as Ct,T as ft,b as mt,a as V,c as Vt}from"../chunks/y6C-zUiM.js";import{T as Rt,a as qt,b as Ht}from"../chunks/gkGIgQOH.js";import{C as At,a as R,T as Bt}from"../chunks/PdIRTCrQ.js";import{I as $e}from"../chunks/uF175uzZ.js";import{V as Ft}from"../chunks/DuenOIq5.js";import{E as he}from"../chunks/CEa0NWkH.js";import{s as ge}from"../chunks/X-i49s3k.js";import{I as Gt,s as Ut}from"../chunks/CHB5F_Rq.js";function be(at,q){const ot=Ot(q,["children","$$slots","$$events","$$legacy"]);const _=[["path",{d:"M12 20v-9"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z"}],["path",{d:"M14.12 3.88 16 2"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97"}],["path",{d:"M22 13h-4"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97"}],["path",{d:"M6 13H2"}],["path",{d:"m8 2 1.88 1.88"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13"}]];Gt(at,Wt({name:"bug"},()=>ot,{get iconNode(){return _},children:(N,H)=>{var f=T(),tt=s(f);Ut(tt,q,"default",{},null),e(N,f)},$$slots:{default:!0}}))}function xe(at,q){const ot=Ot(q,["children","$$slots","$$events","$$legacy"]);const _=[["path",{d:"m12 14 4-4"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0"}]];Gt(at,Wt({name:"gauge"},()=>ot,{get iconNode(){return _},children:(N,H)=>{var f=T(),tt=s(f);Ut(tt,q,"default",{},null),e(N,f)},$$slots:{default:!0}}))}const Pe=()=>{if(!ne.isAuthenticated)throw le(302,"/login")},er=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var we=c('<div class="flex items-center justify-center py-20"><!></div>'),ye=c("<p>Most impactful endpoints to optimize based on traffic and response time variance</p>"),Te=c("<!> <!>",1),Ie=c("<!> <!> <!> <!> <!>",1),Me=c("<!> <!> <!> <!> <!>",1),Se=c("<!> <!>",1),ke=c("<!> <!>",1),je=c("<p>Latest exceptions and errors to address from the last 24 hours</p>"),ze=c("<!> <!>",1),Ee=c("<!> <!> <!>",1),Ne=c("<!> <!> <!>",1),De=c("<!> <!>",1),Le=c("<!> <!>",1),Ce=c('<div class="space-y-6"><div><div class="items-bottom mb-4 flex gap-1"><div class="mr-2 flex h-8 w-8 items-center justify-center rounded-md bg-chart-1/10"><!></div> <h2 class="text-2xl font-bold tracking-tight">Endpoints</h2> <!></div> <div class="overflow-hidden rounded-md border"><!></div></div> <div><div class="mb-4 flex items-center gap-1"><div class="mr-2 flex h-8 w-8 items-center justify-center rounded-md bg-destructive/10"><!></div> <h2 class="text-2xl font-bold tracking-tight">Issues</h2> <!></div> <div class="overflow-hidden rounded-md border"><!></div></div></div>'),Ve=c('<div class="space-y-4"><!> <!></div>');function rr(at,q){ce(q,!0);const ot=ct(fe);let _=_t(null),N=_t(!0),H=_t(""),f=_t(0);async function tt(){X(N,!0),X(H,""),X(f,0);try{const d=await de.get("/dashboard/overview",{projectId:ie.currentProjectId??void 0});X(_,d,!0)}catch(d){X(f,d.status||0,!0),X(H,d.message||"Failed to load dashboard data",!0),console.error(d)}finally{X(N,!1)}}ve(()=>{tt()});function Jt(d,I,st){const ht=(st-I)/1e6,A=d*ht;return A>100?"critical":A>10?"high":A>1?"medium":null}function Kt(){ge("endpoints",{field:"impact",direction:"desc"})}var $t=Ve(),St=w($t);{var Qt=d=>{{let I=ct(()=>t(f)===404?404:t(f)===400?400:t(f)===422?422:400);he(d,{get status(){return t(I)},title:"Failed to Load Dashboard",get description(){return t(H)},onRetry:()=>tt()})}};it(St,d=>{t(H)&&!t(N)&&d(Qt)})}var Xt=a(St,2);{var Yt=d=>{var I=we(),st=w(I);me(st,{size:"xlg"}),y(I),e(d,I)},Zt=d=>{var I=T(),st=s(I);{var ht=A=>{var gt=Ce(),bt=w(gt),xt=w(bt),Pt=w(xt),te=w(Pt);xe(te,{class:"h-5 w-5 text-chart-1"}),y(Pt);var ee=a(Pt,4);r(ee,()=>Ht,(B,F)=>{F(B,{children:(O,Tt)=>{var m=Te(),S=s(m);r(S,()=>Rt,($,o)=>{o($,{class:"pt-1",children:(l,v)=>{At(l,{class:"h-4 w-4 text-muted-foreground/60"})},$$slots:{default:!0}})});var W=a(S,2);r(W,()=>qt,($,o)=>{o($,{children:(l,v)=>{var h=ye();e(l,h)},$$slots:{default:!0}})}),e(O,m)},$$slots:{default:!0}})}),y(xt);var kt=a(xt,2),re=w(kt);r(re,()=>Vt,(B,F)=>{F(B,{children:(O,Tt)=>{var m=T(),S=s(m);{var W=o=>{var l=ke(),v=s(l);r(v,()=>Ct,(g,b)=>{b(g,{children:(k,It)=>{var x=T(),j=s(x);r(j,()=>ft,(G,U)=>{U(G,{class:"hover:bg-transparent",children:(n,et)=>{var M=Ie(),z=s(M);R(z,{label:"Endpoint",tooltip:"The API route or page being accessed"});var E=a(z,2);R(E,{label:"Calls",tooltip:"Total number of requests",align:"right",class:"w-[70px]"});var D=a(E,2);R(D,{label:"Typical",tooltip:"Median response time (P50)",align:"right",class:"w-[80px]"});var rt=a(D,2);R(rt,{label:"Slow",tooltip:"95th percentile - slowest 5%",align:"right",class:"w-[70px]"});var vt=a(rt,2);R(vt,{label:"Impact",tooltip:"Priority based on traffic Ã— variance",align:"right",class:"w-[80px]"}),e(n,M)},$$slots:{default:!0}})}),e(k,x)},$$slots:{default:!0}})});var h=a(v,2);r(h,()=>mt,(g,b)=>{b(g,{children:(k,It)=>{var x=Se(),j=s(x);Et(j,17,()=>t(_).worstEndpoints,Nt,(U,n)=>{const et=ct(()=>Jt(t(n).count,t(n).p50Duration,t(n).p95Duration));var M=T(),z=s(M);{let E=ct(()=>Dt(`/endpoints/${encodeURIComponent(t(n).endpoint)}?preset=24h`));r(z,()=>ft,(D,rt)=>{rt(D,{class:"cursor-pointer hover:bg-muted/50",get onclick(){return t(E)},children:(vt,Mt)=>{var lt=Me(),nt=s(lt);r(nt,()=>V,(p,i)=>{i(p,{class:"max-w-[300px] truncate py-3 font-mono text-sm",get title(){return t(n).endpoint},children:(u,pt)=>{Y();var P=K();Z(()=>Q(P,t(n).endpoint)),e(u,P)},$$slots:{default:!0}})});var ut=a(nt,2);r(ut,()=>V,(p,i)=>{i(p,{class:"py-3 text-right tabular-nums",children:(u,pt)=>{Y();var P=K();Z(dt=>Q(P,dt),[()=>t(n).count.toLocaleString()]),e(u,P)},$$slots:{default:!0}})});var L=a(ut,2);r(L,()=>V,(p,i)=>{i(p,{class:"py-3 text-right font-mono text-sm tabular-nums",children:(u,pt)=>{Y();var P=K();Z(dt=>Q(P,dt),[()=>Lt(t(n).p50Duration)]),e(u,P)},$$slots:{default:!0}})});var C=a(L,2);r(C,()=>V,(p,i)=>{i(p,{class:"py-3 text-right font-mono text-sm tabular-nums",children:(u,pt)=>{Y();var P=K();Z(dt=>Q(P,dt),[()=>Lt(t(n).p95Duration)]),e(u,P)},$$slots:{default:!0}})});var J=a(C,2);r(J,()=>V,(p,i)=>{i(p,{class:"py-3 text-right",children:(u,pt)=>{$e(u,{get level(){return t(et)}})},$$slots:{default:!0}})}),e(vt,lt)},$$slots:{default:!0}})})}e(U,M)});var G=a(j,2);Ft(G,{colspan:5,href:"/endpoints",label:"View all endpoints",onBeforeNavigate:Kt}),e(k,x)},$$slots:{default:!0}})}),e(o,l)},$=o=>{var l=T(),v=s(l);r(v,()=>mt,(h,g)=>{g(h,{children:(b,k)=>{Bt(b,{colspan:5,message:"No transaction data received yet"})},$$slots:{default:!0}})}),e(o,l)};it(S,o=>{t(_)?.worstEndpoints&&t(_).worstEndpoints.length>0?o(W):o($,!1)})}e(O,m)},$$slots:{default:!0}})}),y(kt),y(bt);var jt=a(bt,2),wt=w(jt),yt=w(wt),ae=w(yt);be(ae,{class:"h-5 w-5 text-destructive"}),y(yt);var oe=a(yt,4);r(oe,()=>Ht,(B,F)=>{F(B,{children:(O,Tt)=>{var m=ze(),S=s(m);r(S,()=>Rt,($,o)=>{o($,{class:"pt-1",children:(l,v)=>{At(l,{class:"h-4 w-4 text-muted-foreground/60"})},$$slots:{default:!0}})});var W=a(S,2);r(W,()=>qt,($,o)=>{o($,{children:(l,v)=>{var h=je();e(l,h)},$$slots:{default:!0}})}),e(O,m)},$$slots:{default:!0}})}),y(wt);var zt=a(wt,2),se=w(zt);r(se,()=>Vt,(B,F)=>{F(B,{children:(O,Tt)=>{var m=T(),S=s(m);{var W=o=>{var l=Le(),v=s(l);r(v,()=>Ct,(g,b)=>{b(g,{children:(k,It)=>{var x=T(),j=s(x);r(j,()=>ft,(G,U)=>{U(G,{class:"hover:bg-transparent",children:(n,et)=>{var M=Ee(),z=s(M);R(z,{label:"Issue",tooltip:"The error message or exception that occurred"});var E=a(z,2);R(E,{label:"Count",tooltip:"Number of times this issue occurred",align:"right",class:"w-[70px]"});var D=a(E,2);R(D,{label:"When",tooltip:"When this issue last occurred",align:"right",class:"w-[70px]"}),e(n,M)},$$slots:{default:!0}})}),e(k,x)},$$slots:{default:!0}})});var h=a(v,2);r(h,()=>mt,(g,b)=>{b(g,{children:(k,It)=>{var x=De(),j=s(x);Et(j,17,()=>t(_).recentIssues,Nt,(U,n)=>{var et=T(),M=s(et);{let z=ct(()=>Dt(`/issues/${t(n).exceptionHash}`));r(M,()=>ft,(E,D)=>{D(E,{class:"cursor-pointer hover:bg-muted/50",get onclick(){return t(z)},children:(rt,vt)=>{var Mt=Ne(),lt=s(Mt);r(lt,()=>V,(L,C)=>{C(L,{class:"py-3 font-mono text-sm",get title(){return t(n).stackTrace},children:(J,p)=>{Y();var i=K();Z(u=>Q(i,u),[()=>pe(t(n).stackTrace)]),e(J,i)},$$slots:{default:!0}})});var nt=a(lt,2);r(nt,()=>V,(L,C)=>{C(L,{class:"py-3 text-right font-medium tabular-nums",children:(J,p)=>{Y();var i=K();Z(()=>Q(i,t(n).count)),e(J,i)},$$slots:{default:!0}})});var ut=a(nt,2);r(ut,()=>V,(L,C)=>{C(L,{class:"py-3 text-right text-sm text-muted-foreground tabular-nums",children:(J,p)=>{Y();var i=K();Z(u=>Q(i,u),[()=>_e(t(n).lastSeen,t(ot))]),e(J,i)},$$slots:{default:!0}})}),e(rt,Mt)},$$slots:{default:!0}})})}e(U,et)});var G=a(j,2);Ft(G,{colspan:3,href:"/issues",label:"View all issues"}),e(k,x)},$$slots:{default:!0}})}),e(o,l)},$=o=>{var l=T(),v=s(l);r(v,()=>mt,(h,g)=>{g(h,{children:(b,k)=>{Bt(b,{colspan:3,message:"No issues in the last 24 hours"})},$$slots:{default:!0}})}),e(o,l)};it(S,o=>{t(_)?.recentIssues&&t(_).recentIssues.length>0?o(W):o($,!1)})}e(O,m)},$$slots:{default:!0}})}),y(zt),y(jt),y(gt),e(A,gt)};it(st,A=>{t(H)||A(ht)},!0)}e(d,I)};it(Xt,d=>{t(N)?d(Yt):d(Zt,!1)})}y($t),e(at,$t),ue()}export{rr as component,er as universal};
