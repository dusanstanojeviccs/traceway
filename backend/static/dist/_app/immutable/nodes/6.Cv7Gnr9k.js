import{r as _t}from"../chunks/hp4PFHFv.js";import{a as ft,b as mt,p as Ve,e as $t,i as gt}from"../chunks/Cz_w3iUV.js";import{f as v,i as z,a as t,c as y,t as k,s as se}from"../chunks/DRF5TCtt.js";import{p as ht,q as xt,a as bt,c as A,g as e,u as C,s as a,m as $e,r as D,w as K,f as s,n as T,t as le}from"../chunks/BjAeDMBy.js";import{c as n}from"../chunks/g5lWU4bW.js";import{g as Ke}from"../chunks/C3Sf7PJj.js";import{g as Pt,f as kt,b as Ge}from"../chunks/CDT9LSXp.js";import{g as Ct}from"../chunks/BOe3pJkQ.js";import{B as wt}from"../chunks/2wOyHH5q.js";import{C as ge,a as he,b as xe}from"../chunks/CZ9m_hDi.js";import{C as be}from"../chunks/C2TvfYoV.js";import{C as Pe}from"../chunks/kLTvEu21.js";import{c as yt,d as Tt,T as Je,e as Ee,b as St,a as Re}from"../chunks/y6C-zUiM.js";import{L as It}from"../chunks/2O2paTqt.js";import{E as Qe}from"../chunks/CEa0NWkH.js";import{L as N,C as jt}from"../chunks/Be2xkbpT.js";import{S as Bt,a as Et,C as Rt}from"../chunks/DpDBTxqz.js";import{P as zt}from"../chunks/DpxRarxq.js";import{c as ze}from"../chunks/zDxND3qM.js";import{r as Ae}from"../chunks/UIOQSdMs.js";import{T as At}from"../chunks/BXbwCwB2.js";import{A as Dt}from"../chunks/BeZrX3YG.js";const Ft=!1,Lt=({params:de,url:x})=>{if(!ft.isAuthenticated)throw _t(302,"/login");return{endpoint:de.endpoint,endpointId:de.endpointId,preset:x.searchParams.get("preset")||null,from:x.searchParams.get("from")||null,to:x.searchParams.get("to")||null}},Sr=Object.freeze(Object.defineProperty({__proto__:null,load:Lt,prerender:Ft},Symbol.toStringTag,{value:"Module"}));var Ot=v('<div class="flex items-center justify-center py-20"><!></div>'),qt=v("<!> <!>",1),Mt=v('<hr class="border-border"/> <div><p class="mb-3 text-sm font-medium">Context (Scope)</p> <!></div>',1),Ut=v('<div class="grid grid-cols-2 gap-4 md:grid-cols-4"><!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),Ht=v("<!> <!>",1),Nt=v('<div class="flex items-center gap-2"><!> <!></div> <!>',1),Vt=v("View Full Exception <!>",1),Kt=v('<div class="mb-4 max-h-32 overflow-x-auto rounded-md bg-muted p-3"><pre class="font-mono text-sm whitespace-pre-wrap"> </pre></div> <!>',1),Gt=v("<!> <!>",1),Jt=v('<div class="flex items-center gap-2"><!> <!></div> <!>',1),Qt=v("<!> <!> <!>",1),Wt=v('<div class="max-w-md truncate font-mono text-sm"> </div>'),Xt=v('<span class="text-xs text-muted-foreground"> </span>'),Yt=v('<span class="text-xs text-muted-foreground">-</span>'),Zt=v("<!> <!> <!>",1),er=v("<!> <!>",1),tr=v("<!> <!>",1),rr=v("<!> <!>",1),or=v("<!> <!>",1),ar=v("<!> <!> <!> <!>",1),nr=v('<div class="space-y-6"><!> <!></div>');function Ir(de,x){ht(x,!0);const De=C(Ct);let l=$e(null),ke=$e(!0),ie=$e(""),Ce=$e(!1);async function we(){K(ke,!0),K(ie,""),K(Ce,!1);try{const u=await mt.post(`/endpoints/${x.data.endpointId}`,{},{projectId:Ve.currentProjectId??void 0});K(l,u,!0)}catch(u){console.error(u);const S=u;S.status===404?K(Ce,!0):K(ie,S.message||"Failed to load endpoint details",!0)}finally{K(ke,!1)}}function We(u){return u<1024?`${u} B`:u<1024*1024?`${(u/1024).toFixed(1)} KB`:`${(u/(1024*1024)).toFixed(2)} MB`}xt(()=>{we()});var ye=nr(),Fe=A(ye);{let u=C(()=>decodeURIComponent(x.data.endpoint)),S=C(()=>`Endpoint ID: ${x.data.endpointId}`),Y=C(()=>ze(Ae("/endpoints/[endpoint]",{endpoint:encodeURIComponent(x.data.endpoint)})));zt(Fe,{get title(){return e(u)},get subtitle(){return e(S)},get onBack(){return e(Y)}})}var Xe=a(Fe,2);{var Ye=u=>{var S=Ot(),Y=A(S);It(Y,{size:"xlg"}),D(S),t(u,S)},Ze=u=>{var S=y(),Y=s(S);{var et=G=>{{let ve=C(()=>ze(Ae("/endpoints/[endpoint]",{endpoint:encodeURIComponent(x.data.endpoint)})));Qe(G,{status:404,title:"Endpoint Not Found",description:"The endpoint instance you're looking for doesn't exist or may have expired.",get onBack(){return e(ve)},backLabel:"Back to Endpoint",onRetry:we,get identifier(){return x.data.endpointId}})}},tt=G=>{var ve=y(),rt=s(ve);{var ot=J=>{{let ue=C(()=>ze(Ae("/endpoints/[endpoint]",{endpoint:encodeURIComponent(x.data.endpoint)})));Qe(J,{status:400,title:"Failed to Load Endpoint",get description(){return e(ie)},get onBack(){return e(ue)},backLabel:"Back to Endpoint",onRetry:we})}},at=J=>{var ue=y(),nt=s(ue);{var st=Te=>{var Le=ar(),Oe=s(Le);n(Oe,()=>xe,(I,F)=>{F(I,{children:(V,Z)=>{var L=Ht(),O=s(L);n(O,()=>ge,(b,P)=>{P(b,{children:(j,B)=>{var c=qt(),p=s(c);n(p,()=>he,(d,o)=>{o(d,{children:(i,h)=>{T();var _=k("Endpoint Details");t(i,_)},$$slots:{default:!0}})});var w=a(p,2);n(w,()=>Pe,(d,o)=>{o(d,{children:(i,h)=>{T();var _=k("Details of this specific endpoint occurrence");t(i,_)},$$slots:{default:!0}})}),t(j,c)},$$slots:{default:!0}})});var ee=a(O,2);n(ee,()=>be,(b,P)=>{P(b,{class:"space-y-6",children:(j,B)=>{var c=Ut(),p=s(c),w=A(p);{let r=C(()=>decodeURIComponent(x.data.endpoint));N(w,{label:"Endpoint",get value(){return e(r)},mono:!0})}var d=a(w,2);{let r=C(()=>Pt(e(l).endpoint.statusCode));N(d,{label:"Status",get value(){return e(l).endpoint.statusCode},mono:!0,large:!0,get valueClass(){return e(r)}})}var o=a(d,2);{let r=C(()=>kt(e(l).endpoint.duration));N(o,{label:"Duration",get value(){return e(r)},mono:!0,large:!0})}var i=a(o,2);{let r=C(()=>Ge(e(l).endpoint.recordedAt,{timezone:e(De)}));N(i,{label:"Recorded At",get value(){return e(r)},mono:!0})}var h=a(i,2);N(h,{label:"Server",get value(){return e(l).endpoint.serverName},mono:!0});var _=a(h,2);{let r=C(()=>e(l).endpoint.appVersion||"-");N(_,{label:"Version",get value(){return e(r)},mono:!0})}var f=a(_,2);N(f,{label:"Client IP",get value(){return e(l).endpoint.clientIP},mono:!0});var m=a(f,2);{let r=C(()=>We(e(l).endpoint.bodySize));N(m,{label:"Body Size",get value(){return e(r)},mono:!0})}D(p);var $=a(p,2);{var g=r=>{var Q=Mt(),W=a(s(Q),2),Se=a(A(W),2);jt(Se,{get scope(){return e(l).endpoint.scope}}),D(W),t(r,Q)};z($,r=>{e(l).endpoint.scope&&Object.keys(e(l).endpoint.scope).length>0&&r(g)})}t(j,c)},$$slots:{default:!0}})}),t(V,L)},$$slots:{default:!0}})});var qe=a(Oe,2);{var lt=I=>{var F=y(),V=s(F);n(V,()=>xe,(Z,L)=>{L(Z,{class:"border-red-500/30 bg-red-500/5",children:(O,ee)=>{var b=Gt(),P=s(b);n(P,()=>ge,(B,c)=>{c(B,{children:(p,w)=>{var d=Nt(),o=s(d),i=A(o);At(i,{class:"h-5 w-5 text-red-500"});var h=a(i,2);n(h,()=>he,(f,m)=>{m(f,{class:"text-red-600 dark:text-red-400",children:($,g)=>{T();var r=k("Exception Occurred");t($,r)},$$slots:{default:!0}})}),D(o);var _=a(o,2);n(_,()=>Pe,(f,m)=>{m(f,{children:($,g)=>{T();var r=k("This endpoint request resulted in an exception");t($,r)},$$slots:{default:!0}})}),t(p,d)},$$slots:{default:!0}})});var j=a(P,2);n(j,()=>be,(B,c)=>{c(B,{children:(p,w)=>{var d=Kt(),o=s(d),i=A(o),h=A(i);D(i),D(o);var _=a(o,2);wt(_,{variant:"outline",size:"sm",onclick:()=>Ke(`/issues/${e(l).exception.exceptionHash}`),children:(f,m)=>{T();var $=Vt(),g=a(s($));Dt(g,{class:"ml-2 h-4 w-4"}),t(f,$)},$$slots:{default:!0}}),le((f,m)=>se(h,`${f??""}${m??""}`),[()=>e(l).exception.stackTrace.split(`
`).slice(0,4).join(`
`),()=>e(l).exception.stackTrace.split(`
`).length>4?`
...`:""]),t(p,d)},$$slots:{default:!0}})}),t(O,b)},$$slots:{default:!0}})}),t(I,F)};z(qe,I=>{e(l).exception&&I(lt)})}var Me=a(qe,2);{var dt=I=>{var F=y(),V=s(F);n(V,()=>xe,(Z,L)=>{L(Z,{children:(O,ee)=>{var b=tr(),P=s(b);n(P,()=>ge,(B,c)=>{c(B,{children:(p,w)=>{var d=Jt(),o=s(d),i=A(o);Rt(i,{class:"h-5 w-5 text-muted-foreground"});var h=a(i,2);n(h,()=>he,(f,m)=>{m(f,{children:($,g)=>{T();var r=k("Messages");t($,r)},$$slots:{default:!0}})}),D(o);var _=a(o,2);n(_,()=>Pe,(f,m)=>{m(f,{children:($,g)=>{T();var r=k();le(()=>se(r,`${e(l).messages.length??""} message${e(l).messages.length===1?"":"s"} logged during this request`)),t($,r)},$$slots:{default:!0}})}),t(p,d)},$$slots:{default:!0}})});var j=a(P,2);n(j,()=>be,(B,c)=>{c(B,{class:"px-0 pb-0",children:(p,w)=>{var d=y(),o=s(d);n(o,()=>yt,(i,h)=>{h(i,{children:(_,f)=>{var m=er(),$=s(m);n($,()=>Tt,(r,Q)=>{Q(r,{children:(W,Se)=>{var te=y(),Ie=s(te);n(Ie,()=>Je,(je,R)=>{R(je,{children:(ce,Ue)=>{var pe=Qt(),_e=s(pe);n(_e,()=>Ee,(M,U)=>{U(M,{class:"pl-6",children:(H,me)=>{T();var E=k("Message");t(H,E)},$$slots:{default:!0}})});var fe=a(_e,2);n(fe,()=>Ee,(M,U)=>{U(M,{class:"w-[180px]",children:(H,me)=>{T();var E=k("Recorded At");t(H,E)},$$slots:{default:!0}})});var He=a(fe,2);n(He,()=>Ee,(M,U)=>{U(M,{class:"w-[100px] pr-6",children:(H,me)=>{T();var E=k("Scope");t(H,E)},$$slots:{default:!0}})}),t(ce,pe)},$$slots:{default:!0}})}),t(W,te)},$$slots:{default:!0}})});var g=a($,2);n(g,()=>St,(r,Q)=>{Q(r,{children:(W,Se)=>{var te=y(),Ie=s(te);$t(Ie,17,()=>e(l).messages,gt,(je,R)=>{var ce=y(),Ue=s(ce);n(Ue,()=>Je,(pe,_e)=>{_e(pe,{class:"cursor-pointer hover:bg-muted/50",onclick:()=>Ke(`/issues/${e(R).exceptionHash}/${e(R).id}`),children:(fe,He)=>{var M=Zt(),U=s(M);n(U,()=>Re,(E,re)=>{re(E,{class:"pl-6",children:(oe,Ne)=>{var q=Wt(),ae=A(q,!0);D(q),le(Be=>se(ae,Be),[()=>e(R).stackTrace.split(`
`)[0]]),t(oe,q)},$$slots:{default:!0}})});var H=a(U,2);n(H,()=>Re,(E,re)=>{re(E,{class:"font-mono text-sm text-muted-foreground",children:(oe,Ne)=>{T();var q=k();le(ae=>se(q,ae),[()=>Ge(e(R).recordedAt,{timezone:e(De)})]),t(oe,q)},$$slots:{default:!0}})});var me=a(H,2);n(me,()=>Re,(E,re)=>{re(E,{class:"pr-6",children:(oe,Ne)=>{var q=y(),ae=s(q);{var Be=X=>{var ne=Xt(),ut=A(ne);D(ne),le((ct,pt)=>se(ut,`${ct??""} key${pt??""}`),[()=>Object.keys(e(R).scope).length,()=>Object.keys(e(R).scope).length===1?"":"s"]),t(X,ne)},vt=X=>{var ne=Yt();t(X,ne)};z(ae,X=>{e(R).scope&&Object.keys(e(R).scope).length>0?X(Be):X(vt,!1)})}t(oe,q)},$$slots:{default:!0}})}),t(fe,M)},$$slots:{default:!0}})}),t(je,ce)}),t(W,te)},$$slots:{default:!0}})}),t(_,m)},$$slots:{default:!0}})}),t(p,d)},$$slots:{default:!0}})}),t(O,b)},$$slots:{default:!0}})}),t(I,F)};z(Me,I=>{e(l).messages.length>0&&I(dt)})}var it=a(Me,2);n(it,()=>xe,(I,F)=>{F(I,{children:(V,Z)=>{var L=or(),O=s(L);n(O,()=>ge,(b,P)=>{P(b,{children:(j,B)=>{var c=rr(),p=s(c);n(p,()=>he,(d,o)=>{o(d,{children:(i,h)=>{T();var _=k("Segments");t(i,_)},$$slots:{default:!0}})});var w=a(p,2);n(w,()=>Pe,(d,o)=>{o(d,{children:(i,h)=>{var _=y(),f=s(_);{var m=g=>{var r=k("Timing breakdown of operations within this endpoint request");t(g,r)},$=g=>{var r=k("No segments recorded for this endpoint request");t(g,r)};z(f,g=>{e(l).hasSegments?g(m):g($,!1)})}t(i,_)},$$slots:{default:!0}})}),t(j,c)},$$slots:{default:!0}})});var ee=a(O,2);n(ee,()=>be,(b,P)=>{P(b,{children:(j,B)=>{var c=y(),p=s(c);{var w=o=>{Bt(o,{get segments(){return e(l).segments},get transactionDuration(){return e(l).endpoint.duration},get transactionStartTime(){return e(l).endpoint.recordedAt}})},d=o=>{{let i=C(()=>Ve.currentProject?.framework??"gin");Et(o,{get framework(){return e(i)}})}};z(p,o=>{e(l).hasSegments?o(w):o(d,!1)})}t(j,c)},$$slots:{default:!0}})}),t(V,L)},$$slots:{default:!0}})}),t(Te,Le)};z(nt,Te=>{e(l)&&Te(st)},!0)}t(J,ue)};z(rt,J=>{e(ie)?J(ot):J(at,!1)},!0)}t(G,ve)};z(Y,G=>{e(Ce)?G(et):G(tt,!1)},!0)}t(u,S)};z(Xe,u=>{e(ke)?u(Ye):u(Ze,!1)})}D(ye),t(de,ye),bt()}export{Ir as component,Sr as universal};
